{"mappings":"0vBAAAA,SAASC,iBAAiB,mBAAoBC,SAE9C,MAAMC,cAAgB,CAAC,IAAK,IAAK,IAAK,IAAK,KACrCC,sBAAwB,YAErBF,UACR,MAAMG,EAAYL,SAASM,eAAe,cACpCC,EAAOP,SAASM,eAAe,aAC/BE,EAAkBR,SAASM,eAAe,oBAC1CG,EAAmBT,SAASM,eAAe,WAEjD,IAAII,EAAU,YAiBLC,EAAUC,EAASC,EAASC,GACpCN,EAAgBO,MAAQH,EACxBJ,EAAgBQ,QAChBC,YAAU,KACTT,EAAgBO,MAAQD,GAAS,KAC/BD,YAOKK,EAAUC,GAClBA,EAAGC,iBAEH,MAAMC,EAAMb,EAAgBO,MAC5B,IAAKM,EACJ,OAAO,EAGR,MAAMC,EAAWD,EAAIE,MAAK,4BAC1B,GAAiB,OAAbD,EAEH,OADAX,EAAU,6BAA8B,MACjC,EAGR,MAAMa,EAAQF,EAASG,KAAK,IAAIC,MAAM,IAItC,GAHgBF,EAAMG,QAAQC,GAAY,MAANA,IAAWC,SAC/BL,EAAMG,QAAQC,GAAY,MAANA,IAAWC,OAI9C,OADAlB,EAAU,oEAAqE,MACxE,EAGR,MAAMmB,EAAaN,EAAMC,KAAK,IACxBV,EAAQgB,mBAAmBD,GAMjC,OAJApB,EAAQsB,KAAK,CAAEF,WAAAA,EAAYf,MAAAA,IAC3BN,EAAiBwB,UAAYC,cAAcxB,GAC3CC,EAAU,GAAI,IAEP,EAzDRH,EAAgBQ,QAChBT,EAAKN,iBAAiB,SAAUiB,GAChCb,EAAUJ,iBAAiB,QAASiB,GACpCT,EAAiBR,iBAAiB,kBAEVkB,GACvB,GAA0B,MAAtBA,EAAGgB,OAAOC,QACb,OAgBkBC,EAdPlB,EAAGgB,OAAOG,QAAQD,MAe9B1B,EAAU,GAAI,EAAGD,EAAQ2B,GAAOP,gBADbO,cAsCZN,mBAAmBD,YAC3B,IACC,OAAOS,KAAKT,YACX,MAAOU,GACR,OAAOC,OAAOD,aAIPN,cAAcxB,GAMtB,OAAOA,EAAQgC,KALC,CAAIC,EAAMN,IAAK,gCACLA,mBACvBM,EAAKb,gBAAgBa,EAAK5B,cAGEU,KAAK","sources":["src/app.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', initApp)\n\nconst ALLOWED_CHARS = ['+', '-', '*', '/', '%']\nconst MAX_AMOUNT_OF_RESULTS = 10\n\nfunction initApp() {\n\tconst submitBtn = document.getElementById('submit-btn')\n\tconst form = document.getElementById('main-form')\n\tconst expressionInput = document.getElementById('expression-input')\n\tconst resultsContainer = document.getElementById('results')\n\n\tlet results = []\n\n\texpressionInput.focus()\n\tform.addEventListener('submit', calculate)\n\tsubmitBtn.addEventListener('click', calculate)\n\tresultsContainer.addEventListener('click', onResultsClick)\n\n\tfunction onResultsClick(ev) {\n\t\tif (ev.target.tagName !== 'A') {\n\t\t\treturn\n\t\t}\n\t\tconst idx = ev.target.dataset.index\n\t\tif (typeof idx !== undefined) {\n\t\t\teditResult(idx)\n\t\t}\n\t}\n\n\tfunction fillInput(content, timeout, after) {\n\t\texpressionInput.value = content\n\t\texpressionInput.focus()\n\t\tsetTimeout(() => {\n\t\t\texpressionInput.value = after ?? ''\n\t\t}, timeout)\n\t}\n\n\tfunction editResult(index) {\n\t\tfillInput('', 0, results[index].expression)\n\t}\n\n\tfunction calculate(ev) {\n\t\tev.preventDefault()\n\n\t\tconst exp = expressionInput.value\n\t\tif (!exp) {\n\t\t\treturn false\n\t\t}\n\n\t\tconst filtered = exp.match(/([\\(\\)\\*\\+\\-\\/\\%,0-9]+)/g)\n\t\tif (filtered === null) {\n\t\t\tfillInput('Error: Invalid characters!', 2e3)\n\t\t\treturn false\n\t\t}\n\n\t\tconst chars = filtered.join('').split('')\n\t\tconst opening = chars.filter((i) => i === '(').length\n\t\tconst closing = chars.filter((i) => i === ')').length\n\n\t\tif (opening !== closing) {\n\t\t\tfillInput('Error: Number of opening bracket is not equal to closing bracket!', 2e3)\n\t\t\treturn false\n\t\t}\n\n\t\tconst expression = chars.join('')\n\t\tconst value = evaluateExpression(expression)\n\n\t\tresults.push({ expression, value })\n\t\tresultsContainer.innerHTML = renderResults(results)\n\t\tfillInput('', 0)\n\n\t\treturn false\n\t}\n}\n\nfunction evaluateExpression(expression) {\n\ttry {\n\t\treturn eval(expression)\n\t} catch (err) {\n\t\treturn String(err)\n\t}\n}\n\nfunction renderResults(results) {\n\tconst renderItem = (item, index) => `\n\t\t<a href=\"#\" data-index=${index}>Edit</a>\n\t\t${item.expression} = ${item.value}\n\t`\n\n\treturn results.map(renderItem).join('<br/>')\n}\n"],"names":["document","addEventListener","initApp","ALLOWED_CHARS","MAX_AMOUNT_OF_RESULTS","submitBtn","getElementById","form","expressionInput","resultsContainer","results","fillInput","content","timeout","after","value","focus","setTimeout","calculate","ev","preventDefault","exp","filtered","match","chars","join","split","filter","i","length","expression","evaluateExpression","push","innerHTML","renderResults","target","tagName","index","dataset","eval","err","String","map","item"],"version":3,"file":"index.58a176e7.js.map","sourceRoot":"../"}